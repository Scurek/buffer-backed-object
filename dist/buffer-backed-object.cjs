"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function j(t){return typeof t=="symbol"?!1:!isNaN(t)}function B(t,e){let i=t-t%e;return t%e!=0&&(i+=e),i}function h(t){let e=0;for(const{align:i=1,size:r}of Object.values(t))e=B(e,i)+r;return e=B(e,z(t)),e}function z(t){return Math.max(...Object.values(t).map(e=>e.align??1))}function w(t,e,{byteOffset:i=0,length:r=0,align:n=z(e)}={}){const c=new DataView(t,i);let o=0;const f={...e};for(const[u,l]of Object.entries(f))f[u]={...l,offset:B(o,l.align??1)},o=f[u].offset+l.size;return o=B(o,n),r||(r=Math.floor((t.byteLength-i)/o)),new Proxy(new Array(r),{has(u,l){return j(l)?l<r:l==="buffer"?!0:l in u},get(u,l,I){if(l==="buffer")return t;if(!j(l)){const x=Reflect.get(u,l,I);return typeof x=="function"?x.bind(I):x}const g=parseInt(l),O=g*o;if(!(g>=u.length)){if(!u[g]){u[g]={};for(const[x,U]of Object.entries(f))"get"in U&&Object.defineProperty(u[g],x,{enumerable:!0,get(){return U.get(c,O+U.offset)},set(T){return U.set(c,O+U.offset,T)}});Object.freeze(u[g])}return u[g]}}})}function F(t,e,{byteOffset:i=0,align:r=1}={}){return w(t,e,{byteOffset:i,align:r})[0]}function A({endianness:t="little",align:e=2}={}){if(t!=="big"&&t!=="little")throw Error("Endianness needs to be either 'big' or 'little'");const i=t==="little";return{type:"Uint16",align:e,size:Uint16Array.BYTES_PER_ELEMENT,get:(r,n)=>r.getUint16(n,i),set:(r,n,c)=>r.setUint16(n,c,i)}}function b({endianness:t="little",align:e=4}={}){if(t!=="big"&&t!=="little")throw Error("Endianness needs to be either 'big' or 'little'");const i=t==="little";return{type:"Uint32",align:e,size:Uint32Array.BYTES_PER_ELEMENT,get:(r,n)=>r.getUint32(n,i),set:(r,n,c)=>r.setUint32(n,c,i)}}function d({endianness:t="little",align:e=4}={}){if(t!=="big"&&t!=="little")throw Error("Endianness needs to be either 'big' or 'little'");const i=t==="little";return{type:"Uint32",align:e,size:Uint32Array.BYTES_PER_ELEMENT,get:(r,n)=>r.getUint32(n,i)!==0,set:(r,n,c)=>r.setUint32(n,Number(c),i)}}function _({endianness:t="little",align:e=2}={}){if(t!=="big"&&t!=="little")throw Error("Endianness needs to be either 'big' or 'little'");const i=t==="little";return{type:"Int16",align:e,size:Int16Array.BYTES_PER_ELEMENT,get:(r,n)=>r.getInt16(n,i),set:(r,n,c)=>r.setInt16(n,c,i)}}function s({endianness:t="little",align:e=4}={}){if(t!=="big"&&t!=="little")throw Error("Endianness needs to be either 'big' or 'little'");const i=t==="little";return{type:"Int32",align:e,size:Int32Array.BYTES_PER_ELEMENT,get:(r,n)=>r.getInt32(n,i),set:(r,n,c)=>r.setInt32(n,c,i)}}function E({endianness:t="little",align:e=4}={}){if(t!=="big"&&t!=="little")throw Error("Endianness needs to be either 'big' or 'little'");const i=t==="little";return{type:"Float32",align:e,size:Float32Array.BYTES_PER_ELEMENT,get:(r,n)=>r.getFloat32(n,i),set:(r,n,c)=>r.setFloat32(n,c,i)}}function S({endianness:t="little",align:e=8}={}){if(t!=="big"&&t!=="little")throw Error("Endianness needs to be either 'big' or 'little'");const i=t==="little";return{type:"Float64",align:e,size:Float64Array.BYTES_PER_ELEMENT,get:(r,n)=>r.getFloat64(n,i),set:(r,n,c)=>r.setFloat64(n,c,i)}}function P({endianness:t="little",align:e=8}={}){if(t!=="big"&&t!=="little")throw Error("Endianness needs to be either 'big' or 'little'");const i=t==="little";return{type:"BigInt64",align:e,size:BigInt64Array.BYTES_PER_ELEMENT,get:(r,n)=>r.getBigInt64(n,i),set:(r,n,c)=>r.setBigInt64(n,c,i)}}function N({endianness:t="little",align:e=8}={}){if(t!=="big"&&t!=="little")throw Error("Endianness needs to be either 'big' or 'little'");const i=t==="little";return{type:"BigUint64",align:e,size:BigUint64Array.BYTES_PER_ELEMENT,get:(r,n)=>r.getBigUint64(n,i),set:(r,n,c)=>r.setBigUint64(n,c,i)}}function M(){return{type:"Uint8",align:1,size:1,get:(t,e)=>t.getUint8(e),set:(t,e,i)=>t.setUint8(e,i)}}function k(){return{type:"Int8",align:1,size:1,get:(t,e)=>t.getInt8(e),set:(t,e,i)=>t.setInt8(e,i)}}function y(t){const e=h(t);return{type:"NestedBufferBackedObject",align:z(t),size:e,innerDescriptors:t,get:(i,r)=>w(i.buffer,t,{byteOffset:i.byteOffset+r,length:1})[0],set:(i,r,n)=>{throw Error("Cannot set an entire struct")}}}function L(t,e){const i=h(e)*t;return{type:"NestedArrayOfBufferBackedObjects",align:Object.values(e)[0].align??1,size:i,innerDescriptors:e,get:(r,n)=>w(r.buffer,e,{byteOffset:n+r.byteOffset,length:t}),set:(r,n,c)=>{throw Error("Cannot set an entire array")}}}function R(t){return{type:"UTF8String",align:1,size:t,get:(e,i)=>new TextDecoder().decode(new Uint8Array(e.buffer,i,t)).replace(/\u0000+$/,""),set:(e,i,r)=>{const n=new TextEncoder().encode(r),c=new Uint8Array(e.buffer,i,t);c.fill(0),c.set(n.subarray(0,t))}}}function Y(t){return{type:"reserved",align:1,size:t,get(){},set(){}}}function V({endianness:t="little",align:e=4}={}){const i={x:E({endianness:t,align:e}),y:E({endianness:t,align:e})},r=y(i);return{...r,get:(n,c)=>{const o=r.get(n,c);return new Proxy(o,{get(f,u){return u==="r"?f.x:u==="g"?f.y:f[u]},set(f,u,l){return u==="r"?(f.x=l,!0):u==="g"?(f.y=l,!0):(f[u]=l,!0)}})}}}function D({endianness:t="little",align:e=4}={}){const i={x:E({endianness:t,align:e}),y:E({endianness:t,align:e}),z:E({endianness:t,align:e})},r=y(i);return{...r,get:(n,c)=>{const o=r.get(n,c);return new Proxy(o,{get(f,u){return u==="r"?f.x:u==="g"?f.y:u==="b"?f.z:f[u]},set(f,u,l){return u==="r"?(f.x=l,!0):u==="g"?(f.y=l,!0):u==="b"?(f.z=l,!0):(f[u]=l,!0)}})}}}function C({endianness:t="little",align:e=4}={}){const i={x:E({endianness:t,align:e}),y:E({endianness:t,align:e}),z:E({endianness:t,align:e}),w:E({endianness:t,align:e})},r=y(i);return{...r,get:(n,c)=>{const o=r.get(n,c);return new Proxy(o,{get(f,u){return u==="r"?f.x:u==="g"?f.y:u==="b"?f.z:u==="a"?f.w:f[u]},set(f,u,l){return u==="r"?(f.x=l,!0):u==="g"?(f.y=l,!0):u==="b"?(f.z=l,!0):u==="a"?(f.w=l,!0):(f[u]=l,!0)}})}}}function m({endianness:t="little",align:e=4}={}){const i={x:E({endianness:t,align:e}),y:E({endianness:t,align:e}),z:E({endianness:t,align:e}),w:E({endianness:t,align:e})},r=y(i);return{...r,get:(n,c)=>{const o=r.get(n,c);return[o.x,o.y,o.z,o.w]},set(n,c,o){const f=r.get(n,c);f.x=o.length>0?o[0]:0,f.y=o.length>1?o[1]:0,f.z=o.length>2?o[2]:0,f.w=o.length>3?o[3]:0}}}function $({endianness:t="little",align:e=4}={}){return y({x:b({endianness:t,align:e}),y:b({endianness:t,align:e})})}function q({endianness:t="little",align:e=4}={}){return y({x:b({endianness:t,align:e}),y:b({endianness:t,align:e}),z:b({endianness:t,align:e})})}function G({endianness:t="little",align:e=4}={}){return y({x:b({endianness:t,align:e}),y:b({endianness:t,align:e}),z:b({endianness:t,align:e}),w:b({endianness:t,align:e})})}function H({endianness:t="little",align:e=4}={}){const i={x:b({endianness:t,align:e}),y:b({endianness:t,align:e}),z:b({endianness:t,align:e}),w:b({endianness:t,align:e})},r=y(i);return{...r,get:(n,c)=>{const o=r.get(n,c);return[o.x,o.y,o.z,o.w]},set(n,c,o){const f=r.get(n,c);f.x=o.length>0?o[0]:0,f.y=o.length>1?o[1]:0,f.z=o.length>2?o[2]:0,f.w=o.length>3?o[3]:0}}}function J({endianness:t="little",align:e=4}={}){return y({x:s({endianness:t,align:e}),y:s({endianness:t,align:e})})}function K({endianness:t="little",align:e=4}={}){return y({x:s({endianness:t,align:e}),y:s({endianness:t,align:e}),z:s({endianness:t,align:e})})}function Q({endianness:t="little",align:e=4}={}){return y({x:s({endianness:t,align:e}),y:s({endianness:t,align:e}),z:s({endianness:t,align:e}),w:s({endianness:t,align:e})})}function W({endianness:t="little",align:e=4}={}){const i={x:s({endianness:t,align:e}),y:s({endianness:t,align:e}),z:s({endianness:t,align:e}),w:s({endianness:t,align:e})},r=y(i);return{...r,get:(n,c)=>{const o=r.get(n,c);return[o.x,o.y,o.z,o.w]},set(n,c,o){const f=r.get(n,c);f.x=o.length>0?o[0]:0,f.y=o.length>1?o[1]:0,f.z=o.length>2?o[2]:0,f.w=o.length>3?o[3]:0}}}exports.ArrayOfBufferBackedObjects=w;exports.BigInt64=P;exports.BigUint64=N;exports.BoolUint32=d;exports.BufferBackedObject=F;exports.Float32=E;exports.Float32Vec4=m;exports.Float32x2=V;exports.Float32x3=D;exports.Float32x4=C;exports.Float64=S;exports.Int16=_;exports.Int32=s;exports.Int32Vec4=W;exports.Int32x2=J;exports.Int32x3=K;exports.Int32x4=Q;exports.Int8=k;exports.NestedArrayOfBufferBackedObjects=L;exports.NestedBufferBackedObject=y;exports.UTF8String=R;exports.Uint16=A;exports.Uint32=b;exports.Uint32Vec4=H;exports.Uint32x2=$;exports.Uint32x3=q;exports.Uint32x4=G;exports.Uint8=M;exports.nextAlign=B;exports.reserved=Y;exports.structAlign=z;exports.structSize=h;
